<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Binary Shift</title>
    <style>
        .binary-shift_wrapper__ABjV5 {
            font-family: Arial, sans-serif;
        }

        .binary-shift_btnWrapper__La {
            margin-top: 10px;
        }

        .button {
            margin-right: 10px;
            padding: 5px 10px;
            font-size: 14px;
        }
    </style>
</head>

<body>
    <div id="binary-shift_wrapper__ABjV5" class="binary-shift_wrapper__ABjV5">
        <p id="binary-text"></p>
        <div id="binary-shift_btnWrapper__La" class="binary-shift_btnWrapper__La">
            <button onclick="reset()">Reset</button>
            <button onclick="executeSteps()">Execute Steps</button>
            <button onclick="handleBinaryToText()">Binary to Text</button>
        </div>
        <p>Embark on a binary journey, where order and rhythm lead the way. In the console's realm, every move counts.
            Embrace the pattern of swap, shift, reverse, and repeat. Let the sequence be your guide as you navigate the
            maze of digits to unlock the hidden path.</p>
    </div>

    <script>
        const initialBinaryString = "11011100 11010001 11011000 10011100 11010001 10010101 01111101 11011000 11111001 10010001 11010001";
        let currentBinaryString = initialBinaryString;

        // Swap even and odd bits in each byte
        function swapEvenAndOddBits(e) {
            let result = '';
            for (let i = 0; i < e.length; i += 8) {
                let byte = e.slice(i, i + 8);
                let swappedByte = byte.split('').map((bit, index) => {
                    if (index % 2 === 0 && index + 1 < byte.length) {
                        return byte[index + 1];
                    } else if (index % 2 !== 0) {
                        return byte[index - 1];
                    } else {
                        return bit;
                    }
                }).join('');
                result += swappedByte;
            }
            return result;
        }

        // Shift bits in each byte to the left
        function shiftLeft(e) {
            return e.slice(1) + e[0];
        }

        // Reverse bits in each byte
        function reverseBits(e) {
            return e.split("").reverse().join("");
        }

        // Repeat the string multiple times
        function repeatString(e, times) {
            return Array(times + 1).join(e + " ").trim();
        }

        // Convert binary string to text
        function binaryToText(e) {
            return e.match(/.{1,8}/g).map(byte => String.fromCharCode(parseInt(byte, 2))).join("");
        }

        function executeSteps() {
            // Apply swapEvenAndOddBits to each byte
            currentBinaryString = currentBinaryString.split(" ").map(swapEvenAndOddBits).join(" ");
            console.log("After swapEvenAndOddBits: ", currentBinaryString);

            // Apply shiftLeft to each byte
            currentBinaryString = currentBinaryString.split(" ").map(shiftLeft).join(" ");
            console.log("After shiftLeft: ", currentBinaryString);

            // Apply reverseBits to each byte
            currentBinaryString = currentBinaryString.split(" ").map(reverseBits).join(" ");
            console.log("After reverseBits: ", currentBinaryString);

            // Repeat the string
            currentBinaryString = repeatString(currentBinaryString, 2);
            console.log("After repeatString: ", currentBinaryString);

            updateText(currentBinaryString);
        }

        function handleBinaryToText() {
            const text = binaryToText(currentBinaryString);
            console.log("After binaryToText: ", text);
            updateText(text);
        }

        function reset() {
            currentBinaryString = initialBinaryString;
            console.log("Reset: ", currentBinaryString);
            updateText(currentBinaryString);
        }

        function updateText(newText) {
            document.getElementById("binary-text").innerText = newText;
        }

        reset();
    </script>
</body>

</html>